var AutoSuggest;(function(n){(function(n){var e=function(){function n(){}return n.isRichSuggestion=function(t){return n._richSuggestions.indexOf(t)!=-1},n.Text="AS",n.History="HS",n.PopularNow="PN",n.Store="CS",n.Weather="WA",n.InBoxApp="QP",n.Setting="QS",n.SingleEntity="MB",n.MultiEntity="ME",n.DirectNav="MD",n._richSuggestions=[n.Store,n.Weather,n.InBoxApp,n.Setting,n.SingleEntity,n.MultiEntity,n.DirectNav],n}(),t,i,r,u,f;n.SuggestionTypes=e,t=function(){function n(){}return n.User="SRCHHPGUSR",n.History="_UR",n}(),n.CookieNames=t,i=function(){function n(){}return n.AutoSuggest="AS",n.History="OMW",n}(),n.CrumbNames=i,r=function(){function n(){}return n.CursorPosition="cp",n.Options="o",n.ConversationId="cvid",n.SuggestionCount="sc",n.PartialQuery="pq",n.SuggestionPosition="sp",n.SuggestionType="qs",n.PreviewPaneSuggestionType="qsc",n.SkipValue="sk",n.PreviewPaneSkipValue="skc",n.Ghosting="ghc",n.PreviewPaneDisabled="ppd",n.Css="css",n.CssVersion="ver",n.Count="count",n.DataSet="ds",n.SessionId="sid",n.TimeStamp="qt",n.Query="q",n}(),n.QueryParams=r,u=function(){function n(){}return n.HistoryEnabled="hs",n.HitHighlighting="h",n.PopularNow="p",n.Local="l",n.Answers="a",n}(),n.Options=u,f=function(){function n(){}return n.HoverUrl="hvurl",n.HoverId="hvid",n.Query="query",n.ErrorCode="ec",n.Url="url",n.Navigation="nav",n.Type="stype",n.Autocomplete="hc",n.IsNestedSuggestion="ns",n}(),n.SuggestionAttributes=f})(n.Service||(n.Service={}));var t=n.Service})(AutoSuggest||(AutoSuggest={})),_w.Bing=_w.Bing||{},Bing.AS={},Bing.AS.EventIds={TextChanged:1,SelectPrevItem:2,SelectNextItem:3,UpdateText:4,NavigateSerp:7,ReadyToProcessEvents:8,SelectLeftItem:9,SelectRightItem:10,NavigateLink:11,EnterKeyPressed:12,EscKeyPressed:13,CloseFlyout:15,MouseEnterSuggestion:16,MouseLeaveSuggestion:17,LastSharedEventId:99,ConfigurationSet:100,Initialized:101,RequestSent:102,ApiCallback:103,ApiServiceReceived:104,ValidResponseReceived:105,SuggestionsRendered:106,NoResults:107,InvalidQuery:108,BeforeNavigate:109,UpdateTextAndRequery:110,QueryChanged:111,InstSubmit:112,GhostedSuggestion:113,GhostingSubmit:114,DropDownShown:115,DropDownHidden:116},Bing.AS.Constants={KeyCodeBackspace:8,KeyCodeTab:9,KeyCodeEnter:13,KeyCodeEscape:27,KeyCodeSpace:32,KeyCodeArrowLeft:37,KeyCodeArrowUp:38,KeyCodeArrowRight:39,KeyCodeArrowDown:40,KeyCodeDelete:46,KeyCodeImeOpen:229,HitHighlightStartToken:"<strong>",HitHighlightEndToken:"<\/strong>",SuggestionsDataProvider:1,PreviewPaneDataProvider:2},Bing.AS.AutoSuggest=function(){function a(t,i,r,u){if(n.config.latencyLag>0&&!u){setTimeout(sj_wf(a,t,i,r,!0),n.config.latencyLag);return}if(n.raiseEvent(Bing.AS.EventIds.ApiCallback),r==n.currentQuery)if(t!=null){if(t.indexOf("NoResults")==0){n.canvas.currentSuggestionList=[],n.raiseEvent(Bing.AS.EventIds.NoResults);return}n.raiseEvent(Bing.AS.EventIds.ValidResponseReceived,r,{},i),h=r,n.canvas.render(t,n.currentQuery,i),s=!0}else n.canvas.currentSuggestionList=[],n.raiseEvent(Bing.AS.EventIds.NoResults)}function v(n){return r.asf&&!n?k:d}function y(i,u,f){f=f||n.canvas.selectedSuggestion;switch(i){case t.SuggestionCount:return n.canvas.currentSuggestionList.length+"-"+h.length;case t.PartialQuery:return u?encodeURIComponent(n.currentQuery):n.currentQuery;case t.SuggestionPosition:return f?f.ord+1:-1;case t.SuggestionType:return f?f.src:"n";case t.SkipValue:return f&&f.sk?f.sk:"";case t.PreviewPaneSkipValue:var e=null;return f&&f.qsc&&(e=f.skc?f.skc:""),e;case t.PreviewPaneSuggestionType:return f&&f.qsc?f.qsc:null;case t.Ghosting:return n.ghostInstValue>0?n.ghostInstValue:null;case t.ConversationId:return r.asf?_G.IG:null}}function b(t,i){var s=[],a=t["0"].Type.toString(),v=c[a],e,o,l,r,f;for(u.appendHistory(i,t,v),o=0;o<t.length;o++){if(e=t[o],l=e.Type,r=e.Suggests,!w[l]){for(f=0;f<r.length;f++)r[f].ServiceType=l,n.lastSuggestionType=r[f].Type;s=s.concat(r)}n.raiseEvent(Bing.AS.EventIds.ApiServiceReceived,e)}h=i,n.canvas.render(s,n.currentQuery)}var n=this,e;n.config=null,n.currentQuery="",n.apiOptions="",n.canvas=null,n.logMeta="",n.popularNowEnabled=!1,n.cssVersioningEnabled=!1,n.cssVersioningMgr,n.lastSuggestionType,n.data={};var t=AutoSuggest.Service.QueryParams,o=AutoSuggest.Service.Options,d=[t.PartialQuery,t.SuggestionCount,t.SuggestionPosition,t.SuggestionType,t.SkipValue,t.PreviewPaneSkipValue,t.PreviewPaneSuggestionType,t.Ghosting,t.ConversationId],k=[t.Ghosting],r,p=0,c={},w={QR:1,NW:0},h="",u,f=Bing.AS.EtwEventLogger,i,s=!1,l=!1;for(sj_evt.bind("layoutChanged",function(n){l=n[1].layoutType==="1C"},!0),n.init=function(t,f){var h,s,l,v,y,e;if(n.config=r=t,t.p0)for(h=t.p0.split(","),s=0;s<h.length;s++)l=s.toString(),v=h[l].toString(),c[v]=1;i=new Bing.AS.DataProvider(t,Bing.AS.Constants.SuggestionsDataProvider,a),n.popularNowEnabled=t.ePN,t.eLO&&n.addApiOption(o.Local),t.eAN&&(y=t.as||o.Answers,n.addApiOption(y)),u=new Bing.AS.History(t),u.init(),n.canvas=new Bing.AS.Canvas(n,t,f),(n.cssVersioningEnabled=t.asf&&t.ic&&t.cv)&&(n.cssVersioningMgr=new Bing.AS.CssVersioningManager(n)),e=new Bing.AS.EventRegistration,e.add(Bing.AS.EventIds.SuggestionsRendered,function(i,r,f,e,o){n.raiseEvent(Bing.AS.EventIds.SuggestionsRendered,i,r,f,e,o),t.asf&&u.setQueryWithoutHistory(i,r)}),e.add(Bing.AS.EventIds.UpdateText,function(t,i){n.raiseEvent(Bing.AS.EventIds.UpdateText,t,i)}),e.add(Bing.AS.EventIds.NavigateSerp,function(t,i){n.raiseEvent(Bing.AS.EventIds.NavigateSerp,t,i)}),e.add(Bing.AS.EventIds.NavigateLink,function(t,i,r,u){n.raiseEvent(Bing.AS.EventIds.NavigateLink,t,i,r,u)}),e.add(Bing.AS.EventIds.NoItemSelected,function(){n.raiseEvent(Bing.AS.EventIds.NoItemSelected)}),e.add(Bing.AS.EventIds.MouseEnterSuggestion,function(t){n.raiseEvent(Bing.AS.EventIds.MouseEnterSuggestion,t)}),e.add(Bing.AS.EventIds.MouseLeaveSuggestion,function(t){n.raiseEvent(Bing.AS.EventIds.MouseLeaveSuggestion,t)}),e.add(Bing.AS.EventIds.NoResults,function(){n.raiseEvent(Bing.AS.EventIds.NoResults)}),n.canvas.EventRegistry.push(e),n.raiseEvent(Bing.AS.EventIds.Initialized,this)},n.addApiOption=function(n){i.addApiOption(n)},n.apiCB=function(t){n.raiseEvent(Bing.AS.EventIds.ApiCallback);var i="",r=[],e,u=t.AS;f&&f.log(n,"ApiResponseReceived");try{if(i=u.Query,e=u.FullResults==1,r=u.Results,n.logMeta=u.LogMeta,n.currentQuery!=""&&i!=n.currentQuery)return;if(!r){n.canvas.currentSuggestionList=[],n.raiseEvent(Bing.AS.EventIds.NoResults);return}}catch(o){return}n.raiseEvent(Bing.AS.EventIds.ValidResponseReceived,i,r),b(r,i)},n.setData=function(t){n.data=t},n.enabledPopularNow=function(t){n.popularNowEnabled=t},n.reset=function(){u.reset()},n.getAllSuggestionInstUrl=function(n,t){for(var r=v(t),u=[],f,i=0;i<r.length;i++)f=y(r[i],!0,n),f!==null&&(u=u.concat(["&",r[i],"=",f]));return u.join("")},n.getAllSuggestionInstObject=function(n,t){for(var r=v(t),f={},u,i=0;i<r.length;i++)u=y(r[i],!1,n),u!==null&&(f[r[i]]=u);return f},n.setCursorPosition=function(n){p=n},n.setDataSet=function(n){this.config.ds=n},n.fetch=function(e){i.addParam(t.CursorPosition,p),l&&i.addParam(t.PreviewPaneDisabled,1),r.h&&n.currentQuery!=""&&i.addApiOptionN(o.HitHighlighting),n.popularNowEnabled&&i.addApiOptionN(o.PopularNow),u.setDataProviderCallParams(n.currentQuery,i),r.ds&&i.addParam(t.DataSet,r.ds),r.cnt&&r.cnt>0&&i.addParam(t.Count,r.cnt),r.asf&&!s&&i.addParam(t.Css,1),n.cssVersioningEnabled&&s&&i.addParam(t.CssVersion,n.cssVersioningMgr.getCssVersionList());var h=i.fetch(e);f&&f.log(n,"ApiRequestSent"),n.raiseEvent(Bing.AS.EventIds.RequestSent,n.currentQuery,h)},e=0;e<Bing.AS.AutoSuggest.ScopeExtensions.length;e++)Bing.AS.AutoSuggest.ScopeExtensions[e].init.apply(this)},Bing.AS.AutoSuggest.ScopeExtensions=[],Bing.AS.AutoSuggest.prototype.EventRegistry=[],Bing.AS.AutoSuggest.prototype.InstrumentationTypes=[],Bing.AS.AutoSuggest.prototype.setQuery=function(n){var t=this.config.eHS||this.popularNowEnabled?0:1;n.length>=t?(this.currentQuery=n,this.fetch(n)):this.raiseEvent(Bing.AS.EventIds.InvalidQuery)},Bing.AS.EventRegistration=function(){this.events=[],this.add=function(n,t){this.events[n]=t}},Bing.AS.AutoSuggest.prototype.raiseEvent=function(n){for(var r=arguments.length?[].slice.apply(arguments).slice(1):[],i,t=0;t<this.EventRegistry.length;t++)i=this.EventRegistry[t],i.events[n]&&i.events[n].apply(this,r)},Bing.AS.History=function(n){function h(){return n.eHS&&sj_cook.get(c,l)!="0"}function y(n){var r=h();return(r!=s&&t.reset(),s=r,!r)?!1:i?n.indexOf(i)!=0:!0}var u=AutoSuggest.Service.QueryParams,e=AutoSuggest.Service.Options,o=AutoSuggest.Service.SuggestionTypes,t=this;t.config=n;var c="_UR",l="OMW",a="_SS",v="SID",s=h(),i=null,r,f={};n.vid&&(f["hs.ds"]=n.vid),t.setDataProviderCallParams=function(t,i){if(r||(r=sj_cook.get(a,v)),y(t)&&r){for(var o in f)i.addParam(o,f[o]);n.asf?i.addParam(u.Options,e.HistoryEnabled):(i.addParam(u.SessionId,r),i.addParam(u.TimeStamp,sb_gt()),i.addApiOptionN(e.HistoryEnabled))}},t.appendHistory=function(n,r,u){var e=0,s=t.getHistory(n,r),h={Type:o.History,Suggests:s},f;if(e=s.length,e){for(f=0;f<e;f++)h.Suggests[f].isHist=!0;r.splice(u?1:0,1,h)}else i=n},t.setQueryWithoutHistory=function(n,t){for(var u=!1,r=0;r<t.length;r++)if(t[r].stype&&t[r].stype==o.History){u=!0;break}u||(i=n)},t.reset=function(){i=null}},Bing.AS.History.prototype.init=function(){},Bing.AS.History.prototype.getHistory=function(n,t){for(var i=0;i<t.length;i++)if(t[i].Type==AutoSuggest.Service.SuggestionTypes.History)return t[i].Suggests;return[]},Bing.AS.Utils=new function(){function f(n,t){if(n===t)return!1;while(t&&t!==n)t=t.parentNode;return t===n}var i=new RegExp(Bing.AS.Constants.HitHighlightStartToken,"gi"),r=new RegExp(Bing.AS.Constants.HitHighlightEndToken,"gi"),e=0,n,t=[],u=5;this.StripHighlighting=function(n){return n.replace(i,"").replace(r,"")},this.SetInnerText=function(n,t){if(n&&typeof t=="string"){var i="textContent";n[n[i]!==undefined?i:"innerText"]=t}},this.GetComputedStyle=function(n){return _w.getComputedStyle?_w.getComputedStyle(n,null):n.currentStyle},this.GetQueryStringParam=function(n,t){var r=new RegExp("[?&]{1}"+t+"=([^&]+)"),i=n.match(r);return i?i[1]:null},this.LoadScript=function(i){n=n||_d.getElementsByTagName("head")[0];var r=sj_ce("script");n.appendChild(r),r.src=i,t.push(r),t.length>=u&&n.removeChild(t.shift())},this.SetSelectionRange=function(n,t,i){if(n.setSelectionRange)n.setSelectionRange(t,i);else{var r=n.createTextRange();r.moveEnd("sentence",-1e5),r.moveStart("character",t),r.moveEnd("character",i-t),r.select()}},this.TruncateText=function(n,t){return n.length>t&&(n=n.substr(0,t-3),n=n.replace(/\s+$/g,"")+"..."),n},this.GetMouseCoords=function(n){return n=sj_evas(n),{x:n.clientX,y:n.clientY}},this.RewriteAttribsToProps=function(n,t){for(var i,r,u=0;i=t[u++];)r=n.getAttribute(i),r&&(n[i]=r)},this.MouseEnterLeave=function(n,t){return function(i){i=sj_evas(i);var r=i.relatedTarget||(i.type=="mouseout"?i.toElement:i.fromElement);t===r||f(t,r)||n.call(t,i)}},this.getCursorPosition=function(n,t){var i=0,e=_d.selection,o=n.selectionStart,r,u,f;return o!=null?i=o:e&&n.createTextRange&&(t&&n.focus(),r=n.createTextRange(),u=r.duplicate(),f=e.createRange(),t&&r.moveToBookmark(f.getBookmark()),u.setEndPoint("EndToStart",f),i=u.text.length),i},this.RemoveClassName=function(n,t){n&&(n.className=n.className.replace(t,""))}},_w.Bing=_w.Bing||{},Bing.AS=Bing.AS||{},Bing.AS.DataProvider=function(n,t,i){function s(t){var i=t,r,e;n.asf&&n.ds&&(r="/AS/Suggestions",i=i.replace(r,r+"/"+n.ds));for(e in f)i+="&"+e+"="+f[e];return f={},u=[],i}function v(n){o.push(n)}function y(n){u.push(n)}function r(n,t){f[n]=t}function p(n,t){var i=t?u:o.concat(u);r(AutoSuggest.Service.QueryParams.Query,encodeURIComponent(n)),r(AutoSuggest.Service.QueryParams.Options,i.join("+")),Bing.AS.Utils.LoadScript(s(c))}function l(t){var i=[].slice.call(arguments);return r(AutoSuggest.Service.QueryParams.ConversationId,_G.IG),i.unshift(s(decodeURIComponent(n.u)+encodeURIComponent(t))),h.apply(_w,i)}function h(n){var t=sj_gx(),r;return e++,r=[].slice.apply(arguments).slice(1),r.unshift(e),t.open("GET",n,!0),t.onreadystatechange=function(){if(t.readyState==4){t.onreadystatechange=function(){};var n=null;t.status==200&&(n=t.responseText),r.unshift(n),i.apply(_w,r)}},t.withCredentials!==undefined&&(t.withCredentials=!0),t.send(),e}var b=this,a=Bing.AS.Constants.PreviewPaneDataProvider,w=t==a?".apiECB":".apiCB",c=[decodeURIComponent(n.u),"&mkt=",n.mkt,"&type=cb&cb=",n.globalId,w].join(""),o=[],f={},u=[],e=0;return{addApiOption:v,addApiOptionN:y,addParam:r,fetch:n.asf?l:p,fetchUrl:h}},Bing.AS.Canvas=function(n,t,i){function rt(n){f=f||c.GetMouseCoords(n)}function it(n,t){var i=c.GetMouseCoords(n);f&&(f.x!=i.x||f.y!=i.y)&&(f=i,t.className.indexOf(st)==-1&&(r.highlightSuggestion(t),r.raiseEvent(Bing.AS.EventIds.MouseEnterSuggestion,t)))}function vt(n,t,i){for(var f=[],u=0,e,o=n.split(Bing.AS.Constants.HitHighlightStartToken),u=0;u<o.length;u++)f=f.concat(o[u].split(Bing.AS.Constants.HitHighlightEndToken));for(u=0;u<f.length;u++)f[u]&&(e=u%2==0?r.buildSuggestionSegment(f[u],i?"span":0,i):r.buildSuggestionSegment(f[u],"strong",i),t.appendChild(e))}function at(n,t){var e=n.Type,u=r.SuggestionGroupBuilders[e],f,i;return u?u.call(r,n,t):(f=r.SuggestionBuilders[n.Type]||r.buildSuggestion,i=r.ce("li"),r.decorateSuggestion(i,n,t),i=f.call(r,n,i),!i)?!1:(n.SelectTxt||(n.SelectTxt=n.DisplayTxt),r.appendSuggestion(i,n),i)}function ct(){for(var f=r.suggestionsContainer.childNodes,t,i,u,n=0;n<f.length;n++)if(t=f[n],t.overflowElems)for(i=0;i<t.overflowElems.length;i++)u=t.overflowElems[i],u.offsetLeft+u.offsetWidth>r.suggestionsContainer.offsetWidth&&(u.style.display="none")}function bt(n,t){var i;return n?(i=n.getAttribute(s.Navigation))?t==o.right&&n.panel&&!n.panel.visible?void 0:i.split(";")[t]:void 0:p[t]}function ht(n){if(sb_ie&&typeof sb_de.style.opacity=="undefined"&&_d.selection){var t=_d.selection.createRange();t.moveStart("character",-n.value.length),n.selectionStart=t.text.length}}function h(n){var o,f;(o=bt(u,n))&&(o==t.i?(e(),r.unHighlightSuggestionHandler(),r.raiseEvent(Bing.AS.EventIds.NoItemSelected)):(f=r.ge(o),f&&(e(f),r.highlightSuggestion(f))))}function lt(){return ht(y),y.selectionStart==y.value.length}function v(n){for(var t=r.currentSuggestion;t=t[n];)if(!t.hd)return t;return null}function nt(n){n=sj_evas(n),sj_sp(n)}function g(){return t.hn?"http://"+t.hn:""}function d(n){ot.test(n.className)||(n.className+=" "+st)}function tt(n){c.RemoveClassName(n,ot)}function e(n){if(r.selectedSuggestion=n,!n||n.supressTextOnSelect)r.raiseEvent(Bing.AS.EventIds.UpdateText,ut,!0);else{var t=n.query||r.currentSuggestionList[n.ord];!t&&n.panel&&(t=n.panel.suggestion.query),r.raiseEvent(Bing.AS.EventIds.UpdateText,t,n.isPPElem)}}function wt(n,i){return t.anc?null:(i.className=this.SuggestionClassName+" sa_2RowImg "+this.SuggestionClassName+n.Type,this.buildSuggestionImage(n,i),this.buildSuggestionTerm(n,i),this.buildSuggestionDescription(n,i),this.addSuggestionUrl(n,i),i.supressTextOnSelect=!0,i)}function yt(n){for(var r="script",e="src",o=b.getElementsByTagName(r),u,t,i,f;o.length;)b.removeChild(o[0]);for(u=n.getElementsByTagName(r);u.length;)t=sj_ce(r),i=u[0],t.type=i.type,f=i.getAttribute(e),f?t.setAttribute(e,f):(t.setAttribute("data-bing-script","1"),t.text=i.innerHTML),i.parentNode.removeChild(i),b.appendChild(t)}function kt(n){var o="style",u=n.getElementsByTagName(o),s,f,i,e;if(r.autoSuggestInstance.cssVersioningEnabled)r.autoSuggestInstance.cssVersioningMgr.storeStyles(n);else if(t.ic)for(s=r.document.getElementsByTagName("head")[0];u.length;)f=u[0],i=r.ce(o),s.appendChild(i),i.textContent!==undefined?i.textContent=f.innerHTML:i.styleSheet.cssText=f.innerHTML,n.removeChild(f);else for(e=0;e<u.length;e++)sj_ic(u[e].innerHTML)}var r=this,k,l,w,a;r.autoSuggestInstance=n,r.config=t,r.container=i,r.currentRenderIndex=0,r.currentSuggestion,r.currentSuggestionList=[],r.selectedSuggestion,r.clickedSuggestion,r.suggestionTypesRendered,r.suggestionsContainer=i,r.document=t.ic&&t.asf?_ge("sa_con").contentWindow.document:_d,r.SuggestionClassName="sa_sg";var st="sa_hv",ot=/(\s|^)sa_hv/g,et="sa_tm",c=Bing.AS.Utils,ft=c.MouseEnterLeave,o={up:0,right:1,down:2,left:3},ut,pt=t.m||5,f,y=_ge(t.i),p=[],u,b=_ge(t.c||"sw_as"),s=AutoSuggest.Service.SuggestionAttributes;for(r.render=function(n,e,h){var a=0,y=[],c,b,v,l,k,d,w;if(i.innerHTML="",ut=e,r.currentSuggestionList=[],r.currentSuggestion=null,r.selectedSuggestion=null,u=null,f=null,r.currentRenderIndex=0,r.suggestionTypesRendered={},typeof n=="string"){if(r.InsertAjaxResponseIntoDom(i,n),r.autoSuggestInstance.cssVersioningEnabled&&r.autoSuggestInstance.cssVersioningMgr.updateStylesInDom(r.autoSuggestInstance.cssVersioningMgr.getVersion()),r.suggestionsContainer=r.ge(t.slid),r.suggestionsContainer)for(c=r.suggestionsContainer.firstChild;c;){if(c.className.indexOf("sa_hd")!=-1){c.hd=!0,c=c.nextSibling;continue}r.currentSuggestionList.length==0&&(p[o.down]=c.id),c.addInst=!0,Bing.AS.Utils.RewriteAttribsToProps(c,[s.Url,s.Query,s.Type,s.Autocomplete]),r.currentSuggestionList.push(c.query),r.decorateSuggestion(c,{},a++),p[o.up]=c.id,y.push(c),c=c.nextSibling}else{r.raiseEvent(Bing.AS.EventIds.NoResults);return}n={}}else for(d=Math.min(n.length,pt);a<d;a++){if(l=n[a],!l)break;l.DisplayTxt=l.Txt,v=l.ServiceType,v!=k&&r.HeadingBuilders[v]&&(b=r.HeadingBuilders[v].call(r))&&r.addHeading(b,a==0),r.suggestionTypesRendered[l.Type]==null&&(r.suggestionTypesRendered[l.Type]=0),w=at(l,r.currentRenderIndex),w&&(k=v,r.suggestionTypesRendered[l.Type]++,r.currentRenderIndex++,y.push(w))}r.raiseEvent(Bing.AS.EventIds.SuggestionsRendered,e,y,n,h,i),sb_st(ct,1)},r.appendSuggestion=function(n,t){var i=Bing.AS.Utils.StripHighlighting(t.SelectTxt);n.query=i,r.suggestionsContainer.appendChild(n),r.currentSuggestionList.push(i)},r.decorateSuggestion=function(n,t,i){n.src=n.stype||t.Type,n.ord=i,n.sk=t.Sk,r.attachSuggestionEvents(n)},r.attachSuggestionEvents=function(n){if(sj_be(n,"mousemove",function(t){rt(t),it(t,n)}),sj_be(n,"mouseover",ft(function(t){rt(t),it(t,n)},n)),sj_be(n,"mouseout",ft(function(){if(n==u){var i=n.isPPElem?n.panel.suggestion:null;n.isPPElem&&r.unHighlightSuggestionHandler(n),u=i||u}r.raiseEvent(Bing.AS.EventIds.MouseLeaveSuggestion,n)},n)),sj_be(n,"mousedown",function(t){r.onMouseDownSuggestion(t,n)}),sj_be(n,"mouseup",function(t){nt(t);r.onMouseUpSuggestion(t,n)}),t.asf){var i=window.navigator.msPointerEnabled?"onMSPointerDown":"ontouchstart";i.toLowerCase()in _w&&sj_be(n,i.substr(2),function(t){if(f={x:0,y:0},n.it="m",t.pointerType)switch(t.pointerType){case t.MSPOINTER_TYPE_TOUCH:n.it="t";break;case t.MSPOINTER_TYPE_PEN:n.it="p"}else n.it="t"})}},r.buildSuggestionTerm=function(n,t,i){var f=et,u;n.isHist&&(f+=" "+et+"HS"),u=r.ce(i||"div","",f),n.Type=="ID"&&(u.lang="en"),t.appendChild(u),vt(n.DisplayTxt,u)},r.buildSuggestionDescription=function(n,t,i){n.Meta1&&t.appendChild(r.buildSuggestionSegment(n.Meta1,i||"div","sa_ds"))},r.buildSuggestionImage=function(n,t,i){if(n.Img){var f=r.ce(i||"div","","sa_img"),u=r.ce("img"),e=n.Img.alt;e&&(u.title=e),u.src=g()+n.Img.src,u.width=n.Img.w,u.height=n.Img.h,f.appendChild(u),t.appendChild(f)}},r.addSuggestionUrl=function(n,i){n.Url&&(i.url=g()+n.Url+(t.fc?"&FORM="+t.fc:""),i.addInst=!0)},r.buildSuggestionSegment=function(n,t,i){var u=t?r.ce(t,"",i):r.document.createTextNode(n);return t&&Bing.AS.Utils.SetInnerText(u,n),u},r.handleArrowUpKey=function(n){if(t.asf)h(o.up,n),r.currentSuggestion&&r.raiseEvent(Bing.AS.EventIds.SelectPrevItem,r.currentSuggestion);else{var i=r.suggestionsContainer.lastChild;if(r.currentSuggestion&&!(i=v("previousSibling"))){e(),r.unHighlightSuggestionHandler(),r.raiseEvent(Bing.AS.EventIds.NoItemSelected);return}e(i),r.highlightSuggestion(i)}},r.handleArrowDownKey=function(n){if(t.asf)h(o.down,n),r.currentSuggestion&&r.raiseEvent(Bing.AS.EventIds.SelectNextItem,r.currentSuggestion);else{var i;if(!(r.currentSuggestion&&(i=v("nextSibling")))){if(r.currentSuggestion){e(),r.unHighlightSuggestionHandler(),r.raiseEvent(Bing.AS.EventIds.NoItemSelected);return}i=r.currentSuggestion=r.suggestionsContainer.firstChild,i.hd&&(i=v("nextSibling"))}e(i),r.highlightSuggestion(i)}},r.handleArrowRightKey=function(n){t.asf&&lt()&&(h(o.right,n),u&&u.isPPElem&&sj_pd(n))},r.handleArrowLeftKey=function(n){t.asf&&(u&&u.isPPElem&&sj_pd(n),h(o.left,n))},r.highlightSuggestion=function(n){r.unHighlightSuggestionHandler(n),r.currentSuggestion=n.isPPElem?n.panel.suggestion:n,d(r.currentSuggestion),r.currentSuggestion!=n&&d(n),u=n},r.unHighlightSuggestionHandler=function(n){u&&(n&&n.isPPElem&&n.panel.suggestion==r.currentSuggestion||(tt(r.currentSuggestion),r.currentSuggestion=null),(u.isPPElem||!r.currentSuggestion)&&tt(u),u=null)},r.onMouseDownSuggestion=function(n,t){n=sj_evas(n);var i=n.button;i==2?(nt(n),sj_pd(n)):r.clickedSuggestion=t},r.onMouseUpSuggestion=function(n,t){n=sj_evas(n),t.isPPElem&&n.button!=2&&(r.clickedSuggestion=t),r.clickedSuggestion&&r.clickedSuggestion==t&&(e(r.clickedSuggestion),t.url?r.raiseEvent(Bing.AS.EventIds.NavigateLink,t.url,t.addInst,t.redir,t.query):r.raiseEvent(Bing.AS.EventIds.NavigateSerp,t.query),r.clickedSuggestion=null)},k=["DT","IG","MV","SA","SI","SN","SP","SR","TC","TR","WE","WH","WM","WU","ID","NAV"],l=0;l<k.length;l++)w=k[l],this.SuggestionBuilders[w]=wt,Bing.AS.AutoSuggest.prototype.InstrumentationTypes.push(w);for(a=0;a<Bing.AS.Canvas.ScopeExtensions.length;a++)Bing.AS.Canvas.ScopeExtensions[a].init.apply(this);r.InsertAjaxResponseIntoDom=function(n,t){var i,u,f;if(t){for(i=r.ce("div"),i.innerHTML="<br>"+t,u=i.childNodes,i.removeChild(u[0]),yt(i),kt(i),f=r.document.createDocumentFragment();u.length;)f.appendChild(u[0]);n.appendChild(f)}},r.ge=function(n){return t.ic?r.document.getElementById(n):_ge(n)},r.ce=function(n,t,i){var u=r.document.createElement(n);return t&&(u.id=t),i&&(u.className=i),u}},Bing.AS.Canvas.ScopeExtensions=[],Bing.AS.Canvas.prototype.HeadingBuilders={},Bing.AS.Canvas.prototype.SuggestionBuilders={},Bing.AS.Canvas.prototype.SuggestionGroupBuilders={},Bing.AS.Canvas.prototype.buildSuggestion=function(n,t){return t.className=this.SuggestionClassName+(this.suggestionsContainer.childNodes.length==0?" sa_sg_first ":" ")+this.SuggestionClassName+n.Type,this.buildSuggestionTerm(n,t),this.addSuggestionUrl(n,t),t.hc=n.HC,t.hcs=n.HCS,t},Bing.AS.Canvas.prototype.addHeading=function(n,t){var i=sj_ce("li","","sa_hd"+(t?"_first":""));i.hd=!0,i.innerHTML=n,this.suggestionsContainer.appendChild(i)},Bing.AS.Canvas.prototype.HeadingBuilders.PN=function(){return this.config.ePN?sa_loc.H_PN:null},Bing.AS.Canvas.prototype.HeadingBuilders.AS=function(){return this.config.eWH?sa_loc.H_AS:null},Bing.AS.Canvas.prototype.EventRegistry=[],Bing.AS.Canvas.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent,Bing.AS.Layout=function(n,t){function s(n,t){n.appendChild(t)}var e=this,c=n.asf,v=Bing.AS.Utils.GetComputedStyle(sj_b).direction=="rtl",o=c&&n.ic,l=_ge(n.i),r,u,f,h,a;o?(t.style.position="relative",r=sj_ce("iframe","sa_con"),r.setAttribute("frameBorder","0"),r.setAttribute("scrolling","no"),r.style.width="100%",r.style.height=0,r.style.border="none",r.style.position="absolute",r.style.top="1px",s(t,r),f=r.contentWindow.document,f.open(),f.write('<!doctype html public "-//w3c//dtd xhtml 1.0 transitional//en" "http://www.w3.org/tr/xhtml1/dtd/xhtml1-transitional.dtd">'),f.write("<html><head><\/head><body><\/body><\/html>"),f.close(),h=f.createElement("div"),h.id=n.c,h.style.display="block",u=f.createElement("div"),u.className="sa_as",u.style.display="block",s(h,u),s(f.body,h)):(u=sj_ce("div","","sa_as"),s(t,u)),c||(a=sj_ce("ul","sa_ul","sa_drw"),s(u,a)),e.getSuggestionsContainer=function(){return c?n.ic?r.contentWindow.document.getElementById(n.slid):_ge(n.slid):a},e.getSuggestionsDrawer=function(){return u},e.show=function(){u.style.display="block"},e.hide=function(){o?r.style.height=0:u.style.display="none"},e.updateHeight=function(){o&&(r.style.height=0,r.style.height=r.contentWindow.document.getElementById("sw_as").firstChild.scrollHeight+2+"px")},e.update=function(){var r,i,n=Bing.AS.Utils.GetComputedStyle(t.parentNode);v?(i=(parseFloat(n.paddingRight)+parseFloat(n.borderRightWidth))*-1,r=o?(parseFloat(n.borderLeftWidth)+parseFloat(n.paddingLeft))*-1:parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)):(r=(parseFloat(n.paddingLeft)+parseFloat(n.borderLeftWidth))*-1,i=o?(parseFloat(n.borderRightWidth)+parseFloat(n.paddingRight))*-1:parseFloat(n.borderRightWidth)-parseFloat(n.paddingRight)),t.style.marginLeft=r+"px",t.style.marginRight=i+"px",e.updateHeight(),l!=null&&l.dir.length>0&&(u.dir=l.dir)}},Bing.AS.Layout.prototype.EventRegistry=[],Bing.AS.Layout.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent,Bing.AS.Layout.prototype.getLeft=function(){return 0},Bing.AS.Layout.prototype.getWidth=function(){return 0},Bing.AS.SearchForm=function(n){function pt(n){return typeof n=="number"?n:'"'+n.replace(/"/g,'\\"')+'"'}function c(u,f,e){var c,l,y,p,a,b,o,v,h;if(n.sbt){for(;y=d.shift();)t.searchForm.removeChild(y);d=[]}for(f&&t.raiseEvent(Bing.AS.EventIds.GhostingSubmit),s=i.getAllSuggestionInstObject(null,f),t.raiseEvent(Bing.AS.EventIds.BeforeNavigate),e=e||{},p=0,b=[s,e];a=b[p++];)for(o in a)c=_ge("sa_"+o),l=a[o],c?c.value=l:t.addHiddenField(o,l);ct?ct(r,s):(f||sj_evt.fire("onSearch",t.searchForm),t.fireEvt&&!f&&(sj_ue(t.searchForm,"submit",w),t.fireEvt(t.searchForm,"submit"),sj_be(t.searchForm,"submit",w)),v=i.canvas.selectedSuggestion,n.ic&&n.asf&&v&&_w.sa_si_T(v.getAttribute("id")),g(),t.searchForm.submit()),t.fireEvt&&(t.autosuggest.canvas.selectedSuggestion=null,t.autosuggest.ghostInstValue=0,h=_ge("sa_ghc"),!s.ghc&&h&&h.parentNode.removeChild(h))}function g(){var r,i;yt&&n.eUG||(r=t.searchForm.getAttributeNode("onsubmit"),r&&_w.si_T&&(i=r.value.match(/si_T\('(.*)'\)/),i&&i[1]&&si_T(i[1])),yt=!0)}function ot(r,u,e,o,s){var a,h,l;if(sb_st(f,5),o!=undefined&&k(o),e)sj_cook.set("SCRHDN","ASD","1"),sj_cook.set("SCRHDN","DURL",r),c(o,s);else{if(i.config.asf){if(n.sbt){a=function(n){var t,u=/\+/g,f=/([^&=]+)=?([^&]*)/g,r=function(n){return decodeURIComponent(n.replace(u," "))},e=n.substring(n.indexOf("?")+1),i;for(urlParams={};t=f.exec(e);)i=r(t[1]),i!=="q"&&(urlParams[i]=r(t[2]));return urlParams},c(o,s,a(r));return}h=i.canvas.selectedSuggestion,n.ic&&n.asf&&h&&_w.sa_si_T(h.getAttribute("id")),n.eUG?g():t.searchForm.onsubmit&&t.searchForm.onsubmit()}l=r+(u?i.getAllSuggestionInstUrl():""),typeof sj_lc!="undefined"?sj_lc(l):_w.location=l}}function w(n){var r,u;sb_st(f,5),t.cdh(n),r=i.canvas.selectedSuggestion,r?(i.config.asf&&!i.config.ic&&_w.sa_si_T(r.getAttribute("id")),u=r.query,r.url?ot(r.url,r.addInst,r.redir,u,!0):c(u,!0)):c(i.currentQuery,!0)}function ui(n){t.cancelKeyEvent(n)||et(n)}function et(n){var r=n.keyCode;switch(r){case e.KeyCodeEscape:t.config.eAI?(u&&(h(n),sj_sp(n)),sj_pd(n)):(f(),t.cdh(n));break;case e.KeyCodeArrowUp:u&&(i.canvas.handleArrowUpKey(n),t.cdh(n));break;case e.KeyCodeArrowDown:u?i.canvas.handleArrowDownKey(n):ut();break;case e.KeyCodeArrowRight:u&&i.canvas.handleArrowRightKey(n);break;case e.KeyCodeArrowLeft:u&&i.canvas.handleArrowLeftKey(n);break;case e.KeyCodeTab:t.config.asf&&t.fireEvt&&h(n)}}function ii(n){var i=n.keyCode;y||t.cancelKeyEvent(n)||(i==e.KeyCodeArrowUp||i==e.KeyCodeArrowDown||i==e.KeyCodeEscape)&&t.handleUpDownEscOnKeyUp(n)&&et(n)}function ft(){u?t.shouldHidePanel()&&f():ut()}function ut(){(v&&sb_ct(v),y)||(t.lastQuery=null,nt(l()))}function ti(){o.update(),u||(sj_evt.fire("focusChange",r),o.show(),u=!0,t.raiseEvent(Bing.AS.EventIds.DropDownShown),sb_i6&&sj_evt.fire("autosuggestShown",r),sj_evt.fire("onPopTR"))}function h(n){sj_et(n)!=t.searchBox&&Bing.AS.Utils.RemoveClassName(wt,ht),f()}function f(){u&&(o.hide(),fi=u=!1,t.lastQuery=l(),t.raiseEvent(Bing.AS.EventIds.DropDownHidden),sb_i6&&sj_evt.fire("autosuggestHide",r))}function oi(n){n[1]!==r&&(Bing.AS.Utils.RemoveClassName(wt,ht),f())}function gt(){v=sb_st(f,50)}function dt(n){t.updateText(n)}function k(n){r.value=n,st||r.setAttribute("value",n)}function kt(n){a=!0,k(n);var t=n.length;r.focus(),Bing.AS.Utils.SetSelectionRange(r,t,t)}function tt(){var n,i;y||(n=l(),t.lastQuery==n&&a||st||r.setAttribute("value",n),a?nt(n):(t.lastQuery=n,a=!0),i=at,lt&&(i*=1<<Math.max(0,b-ni+1)/2)),sb_st(tt,i)}function nt(n){if(t.lastQuery!=n){if(n.length<si){f();return}t.shouldHidePanel()?f():(v&&sb_ct(v),i.setCursorPosition(t.getCursorPosition()),i.setQuery(n),t.lastQuery=n,b++)}}function bt(){b--}function l(){return r.value.replace(ri,"").replace(ei," ").toLowerCase()}var t=this,p;t.raiseEvent(Bing.AS.EventIds.ConfigurationSet,n),t.config=n,t.searchForm=null,t.searchBox=null,t.autosuggest=null,t.layout=null,t.lastQuery=null,t.DemoQuery="asdemoq",t.DemoPath="asdemopath";var it="SRCHHPGUSR",rt="AS",ni=4,vt,i,o,hi,at=0,lt,b=0,si=n.eHS||n.ePN?0:1,v,y,fi,u,r,a=!0,e=Bing.AS.Constants,s,wt=_ge("b_header"),d=[],ht="b_focus",yt,st=sb_ie&&sb_de.style.opacity===undefined,ri=new RegExp("^\\s*","g"),ei=new RegExp("\\s+","g"),ct=typeof n.cb=="function"?n.cb:null;for(t.init=function(u){var k,v,s,p,d,e,a,b;(t.config.globalId=u,t.config.slid="sa_ul",y=t.isDisabled())||(vt=n.i,t.searchForm=_ge(n.f),r=_ge(vt),t.searchBox=r,n.asf&&n.SBW&&_ge("hp_container")&&(k=_w.innerWidth||sb_de.clientWidth,k<=1024&&(v=_ge(n.c),v&&(v.className+=" sa_n",n.SBW-=30))),t.searchForm.form&&(n.fc=t.searchForm.form.value),sj_cook.set("SCRHDN","ASD","0"),sj_cook.set("SCRHDN","DURL","#"),s=_ge(n.c||"sw_as"),s.style.display="block",t.layout=o=new Bing.AS.Layout(n,s,r.parentNode),t.registerUIElement(s),t.registerUIElement(r),p=_ge("sb_form_go"),p&&t.registerUIElement(p),at=n.d,lt=n.t,t.lastQuery=l(),d=n.asf?o.getSuggestionsDrawer():o.getSuggestionsContainer(),t.autosuggest=i=new Bing.AS.AutoSuggest,i.init(n,d),e=new Bing.AS.EventRegistration,e.add(Bing.AS.EventIds.ApiCallback,bt),e.add(Bing.AS.EventIds.NoResults,gt),e.add(Bing.AS.EventIds.SuggestionsRendered,ti),e.add(Bing.AS.EventIds.UpdateText,dt),e.add(Bing.AS.EventIds.UpdateTextAndRequery,kt),e.add(Bing.AS.EventIds.NavigateSerp,c),e.add(Bing.AS.EventIds.NavigateLink,ot),i.EventRegistry.push(e),a=new Bing.AS.EventRegistration,a.add(Bing.AS.EventIds.SelectPrevItem,function(n){t.raiseEvent(Bing.AS.EventIds.SelectPrevItem,n)}),a.add(Bing.AS.EventIds.SelectNextItem,function(n){t.raiseEvent(Bing.AS.EventIds.SelectNextItem,n)}),i.canvas.EventRegistry.push(a),sj_be(sj_b,"click",h),sj_be(sj_b,"touchend",h),sj_be(t.searchForm,"submit",w),sj_be(r,"keydown",ui),sj_be(r,"keyup",ii),sj_be(r,"click",ft),t.fireEvt&&sj_be(_w,"blur",h),sj_evt.bind("focusChange",oi),sj_evt.bind("hideDrawer",f),tt(),t.raiseEvent(Bing.AS.EventIds.Initialized,t),b=_w.location.search,n.demo&&(Bing.AS.Utils.GetQueryStringParam(b,t.DemoQuery)||Bing.AS.Utils.GetQueryStringParam(b,t.DemoPath))&&(Bing.AS.Utils.LoadScript("/fd/sa/"+_G.Ver+"/AutoSuggest/AutoSuggestDemo.js"),sj_evt.fire("onASDemo",t)))},t.apiCB=function(n){t.autosuggest.apiCB(n)},t.setData=function(n){t.autosuggest.setData(n)},t.isDisabled=function(){return sj_cook.get(it,rt)==0},t.enable=function(n,i){n&&(t.lastQuery=l()),y=!n,i||sj_cook.set(it,rt,n?1:0,1,"/")},t.sid=function(t){i.config.sid=n.sid=t},t.registerUIElement=function(n){sj_be(n,"touchend",sj_sp),sj_be(n,"click",sj_sp)},t.addHiddenField=function(i,r){var u=sj_ce("input");return u.id="sa_"+i,u.name=i,u.value=r,u.type="hidden",t.searchForm.appendChild(u),n.sbt&&d.push(u),u},t.drawerIsOpen=function(){return u},t.cp=0,t.cdh=function(n){sj_sp(n),sj_pd(n)},t.setAllSuggestionInstObject=function(n){s=n},t.addToAllSuggestionInstObject=function(n,t){s[n]=t},t.show=ft,t.getCursorPosition=function(){return t.cp=Bing.AS.Utils.getCursorPosition(r,!0)},_w.sa_si_T=function(r){var u=i.canvas.ge(r.replace("&","")),e,o,f,s;return u&&document.images&&(e=u.getAttribute("h"),f={a:[],add:function(n,t){this.a.push(pt(n)+":"+pt(t))},get:function(){return this.a.length?"&PR={"+this.a.join(",")+"}":""}},f.add("i",i.canvas.clickedSuggestion?u.it||"m":"k"),u.isPPElem&&f.add("et",sb_gt()-u.panel.ot),o=t.autosuggest.data&&t.autosuggest.data.Inst?t.autosuggest.data.Inst.IG:null,o&&e&&(s=new Image,s.src=_G.gpUrl+"IG="+o+"&"+e+f.get()),n.eUG&&g()),!0},t.updateText=function(n){a=!1,k(n)},p=0;p<Bing.AS.SearchForm.ScopeExtensions.length;p++)Bing.AS.SearchForm.ScopeExtensions[p].init.apply(t)},Bing.AS.SearchForm.ScopeExtensions=[],Bing.AS.SearchForm.prototype.EventRegistry=[],Bing.AS.SearchForm.prototype.cancelKeyEvent=function(){return!1},Bing.AS.SearchForm.prototype.handleUpDownEscOnKeyUp=function(){return!1},Bing.AS.SearchForm.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent,Bing.AS.SearchForm.prototype.shouldHidePanel=function(){return!1},Bing.AS.SearchForm.ScopeExtensions.push(new function(){var it=_w.location.search.indexOf("AutoSuggestTestHook_AlwaysGhost=1")>-1,t,v,w,b,n,r,h,s=0,a=0,y=0,g=new RegExp("[-']","g"),o=Bing.AS.Utils.SetSelectionRange,nt=1,tt=2,k,d=!1,l=!1,i,e,f,u,c,p;Bing.AS.Constants.KeyCodeEnter=13,Bing.AS.Constants.KeyCodePageUp=33,Bing.AS.Constants.KeyCodePageDown=34,Bing.AS.Constants.KeyCodeEnd=35,Bing.AS.Constants.KeyCodeHome=36,Bing.AS.Constants.KeyCodeInsert=45,Bing.AS.Constants.GhostingDelayResponse=0,Bing.AS.Constants.GhostingDelayArrowKey=15,i=Bing.AS.Constants,e=Bing.AS.EventIds,this.init=function(){function ii(i){var r,f,o,s;i.config.eHC&&(u=i.autosuggest,u.ghostInstValue=0,r=new Bing.AS.EventRegistration,r.add(e.SuggestionsRendered,ni),r.add(e.NoItemSelected,gt),u.EventRegistry.push(r),u.addApiOption("hc"),t=i.searchBox,et.add(e.GhostingSubmit,ui),k=t.style.width,et.add(e.DropDownHidden,dt),f=Bing.AS.Utils.GetComputedStyle(t),w=f.color,b=f.backgroundColor,n=sj_ce("input","sa_ghostbox",t.className+" sa_ghostbox"),n.setAttribute("autocomplete","off"),o=t.getAttribute("type"),o&&n.setAttribute("type",o),i.registerUIElement(n),n.tabIndex=-1,n.style.zIndex=-1,n.style.position="absolute",s=Bing.AS.Utils.GetComputedStyle(t.parentNode),n.style.left=s.paddingLeft,n.style.top=s.paddingTop,sj_be(n,"keydown",pt),sj_be(n,"keyup",ri),sj_be(n,"focus",yt),sj_be(n,"mouseup",bt),sj_be(n,"mousedown",wt),sj_be(n,"select",ct),sj_be(n,"selectstart",ct),sj_be(sj_b,"mouseup",kt),sj_be(t,"focus",rt),sj_be(t,"keydown",vt),i.config.smg&&sj_be(t,"keypress",at),sj_be(t,"compositionstart",function(){l=!0}),sj_be(t,"compositionend",ti))}function ti(){l=!1,sb_ct(h),h=sb_st(ot,i.GhostingDelayResponse)}function ni(n,t){v=t,s||!u.currentQuery||l||(h=sb_st(ot,i.GhostingDelayResponse))}function gt(){h=sb_st(ot,i.GhostingDelayArrowKey)}function ot(){var p,e,h,w,c,a,i,y;if(d||(p=t.parentNode,p.insertBefore(n,p.firstChild),d=!0),a=t.value,i=a.length,f.cp==i&&!s&&!l){if(it)e=v[0];else for(y=0;y<v.length;y++)if(h=v[y],w=h.src.toLowerCase(),h.hc){e=h;break}if(!e){ut();return}(r=e.query,c=a.toLowerCase(),r=r.toLowerCase(),r.indexOf(c)==0||(r=r.replace(g,""),r.indexOf(c)==0&&r!=c))&&(st(),n.value=a+r.substring(i),r=n.value,r.substring(i).length==0&&(ut(),rt(),lt()),r!=null&&(o(n,i,r.length),n.focus(),f.raiseEvent(Bing.AS.EventIds.GhostedSuggestion,r,w)),r!=null&&u.ghostInstValue==0&&(u.ghostInstValue=nt))}}function dt(){rt(),f.config.SBW&&(n.style.width=k),ut()}function kt(){a&&(ht(),a=0,y=0)}function bt(){y&&!a&&(ht(),t.focus())}function wt(){y=1}function ct(){y&&(a=1)}function pt(e){var h=e.keyCode,a,l;if(s=0,h==i.KeyCodeBackspace&&(s=1,r&&f.cdh(e)),(h==i.KeyCodeDelete||h==i.KeyCodeBackspace||e.keyCode==88&&e.ctrlKey)&&ut(),e.altKey||e.ctrlKey||h>i.KeyCodeEnter&&h<i.KeyCodeSpace||h==i.KeyCodeInsert){a=e.ctrlKey&&(h==i.KeyCodeBackspace||h==86),h==i.KeyCodeEscape&&r==null&&sj_evt.fire("hideDrawer",t),(h==i.KeyCodeEscape||h==65&&e.ctrlKey||a)&&(t.focus(),ut(),a&&o(t,t.value.length,t.value.length),f.config.eAI&&sj_sp(e));return}if(h==i.KeyCodeHome||h==i.KeyCodePageUp){e.shiftKey||(ft(),o(t,0,0),t.focus());return}if(e.keyCode==i.KeyCodeArrowUp||e.keyCode==i.KeyCodeArrowDown){e.keyCode==i.KeyCodeArrowUp?u.canvas.handleArrowUpKey(e):u.canvas.handleArrowDownKey(e),rt(),ut(),l=t.value.length,o(t,l,l);return}if(r&&h==i.KeyCodeTab?(f.cdh(e),ft(1),ut(),rt()):h==i.KeyCodeTab&&sj_evt.fire("hideDrawer",t),r&&h==i.KeyCodeArrowLeft){f.cdh(e),l=t.value.length,ft(),o(t,l,l),t.focus(),ut();return}(h==i.KeyCodeEnd||h==i.KeyCodePageDown||h==i.KeyCodeArrowRight)&&(ft(1),ut(),rt()),c=n.selectionStart,p=n.selectionEnd,t.focus(),o(t,t.value.length,t.value.length)}function ri(n){if(n.shiftKey&&(n.keyCode==i.KeyCodeHome||n.keyCode==i.KeyCodePageUp||n.keyCode==i.KeyCodeArrowLeft)){var r=t.value.length;ft(),rt(),o(t,0,r),t.focus()}}function ht(){var l=n.value,i,c;sb_st(function(){n.value!=l&&u.raiseEvent(e.UpdateTextAndRequery,n.value)},1);var f=_d.selection,s=n.selectionStart,h=n.selectionEnd;f&&n.createTextRange&&(i=n.createTextRange(),c=f.createRange(),s=i.text.length-c.text.length,h=i.text.length),ft(),t.focus(),o(t,s,h),rt(),r=null}function yt(){var n=_ge("sw_b");n&&(n.style.borderColor="#3366bb")}function vt(n){s=0,sb_ct(h),rt(),r=null;var t=n.keyCode;(t==i.KeyCodeDelete||t==i.KeyCodeBackspace||t==88&&n.ctrlKey)&&(s=1)}function at(i){var s,u,f,e;p>c&&(s=n.value.substring(c,p),u=String.fromCharCode(i.charCode),s[0].toLowerCase()==u.toLowerCase()?(t.value+=u,f=t.value,e=f.length,st(),n.focus(),n.value=f+r.substring(e),o(n,e,r.length),i.preventDefault()):(n.value=n.value.substring(0,c),c=p=n.value.length))}function ft(n){r&&(u.raiseEvent(n?e.UpdateTextAndRequery:e.UpdateText,r,!0),u.ghostInstValue=tt)}function rt(){t.style.color=w,t.style.backgroundColor=b,n.style.zIndex=-1,n.style.color="transparent"}function lt(){sb_st(function(){t.focus()},1)}function st(){t.style.color="transparent",t.style.backgroundColor="transparent",n.style.zIndex=2,n.style.color=w,f.config.SBW&&(n.style.width=f.config.SBW+"px")}function ut(){r=null,n&&n.value&&(n.value="")}function ui(){ft(1)}f=this;var et=new Bing.AS.EventRegistration;et.add(e.Initialized,ii),this.EventRegistry.push(et)}}),sa_inst=new Bing.AS.SearchForm(sa_config),sa_inst.init("sa_inst"),sa_eL&&sa_inst.show(),_w.sj_evt&&sj_evt.fire("autoSugLoaded")